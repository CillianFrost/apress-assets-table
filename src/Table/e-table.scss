@import '../styles/mixins/icons';

@mixin cell-width($width) {
  max-width: #{$width}; min-width: #{$width}; width: #{$width};
}

.e-table {
  $root: &;
  box-sizing: border-box; border: 1px solid #e0e0e0; max-width: 100%; height: 100%; overflow-x: auto; overflow-y: hidden;
  &-wrapper { border-collapse: collapse; position: relative; table-layout: fixed; height: 100%; overflow: auto; }
  &-header-cell {
    box-sizing: border-box; padding: 25px 20px; font: 300 13px/1 'OpenSans'; text-align: left; color: #1f2532;
  }
  &-tr { display: block; position: relative; background-color: #f8f8f8; border-bottom: 1px solid #e0e0e0; }
  &-body-tr {
    &:hover { background-color: #f8f8f8; }
    &:last-child {
      .e-table-cell { border-bottom: 0; }
      .e-table-cell-text + .cke,
      .e-table-cell-text { top: auto; bottom: 0; }
    }
    &:first-child .e-table-cell {
      border-top: 0;
      .e-table-cell-text + .cke,
      .e-table-cell-text { top: 0; bottom: auto; }
    }
  }
  &-body { display: block; overflow: auto; width: 100%; height: 100%; }
  &-cell {
    outline: none; user-select: none;
    &:hover {
      &:before { content: ''; border: solid 1px #e3b61c; position: absolute; top: 0; left: 0; right: 0; bottom: 0; }
      &:after { display: none; }
    }
    &.is-focus {
      &:before { content: ''; border: solid 1px #028dd8; position: absolute; top: 0; left: 0; right: 0; bottom: 0; }
      &:after { display: none; }
    }
    font-size: 12px; color: #1f2532; height: 100px; box-sizing: border-box; border-top: 1px solid #e0e0e0; border-bottom: 1px solid #e0e0e0; padding: 20px; text-align: left; position: relative;
    &:after { height: 50px; width: 1px; background-color: #e0e0e0; position: absolute; content: ''; right: -1px; top: 50%; margin-top: -25px; }
    &:last-child {
      &:after { width: 0; }
      #{$root} {
        &-cell-text.is-edit + .cke,
        &-cell-text.is-edit { right: 0; left: auto; }
      }
    }
    &:first-child #{$root} {
      &-cell-text.is-edit + .cke,
      &-cell-text.is-edit { right: auto; left: 0; }
    }
  }
  &-header-cell,
  &-cell {
    &.is-check { @include cell-width(60px); padding-left: 30px; }
    &.is-description { @include cell-width(270px); }
    &.is-detailed-description {  @include cell-width(280px); }
    &.is-h1 { @include cell-width(180px); }
    &.is-name { @include cell-width(200px); }
    &.is-page-description {  @include cell-width(270px); }
    &.is-photo { @include cell-width(100px); text-align: center; }
    &.is-product-group { @include cell-width(120px); }
    &.is-tag-title { @include cell-width(240px); }
    &.is-url { @include cell-width(170px); }
  }
  &-cell-placeholder { color: #b4b5b8; }
  &-path-text { line-height: 12px; display: inline-block; vertical-align: text-bottom; user-select: text; }
  &-path-arrow {
    position: relative;;
    &:after { content: ''; position: absolute; @include angle-double-right-icon(); width: 12px; height: 12px; margin: 0 4px; }
  }
  &-img { max-width: 60px; max-height: 60px; }
  &-img-empty {
    width: 60px; height: 60px; box-sizing: border-box; border: 1px dashed; position: relative;
    &:after { @include camera-icon() width: 17px; height: 15px; content: ''; position: absolute; top: 50%; left: 50%; margin: -7.5px 0 0 -8.5px; }
  }
  &-cell-text {
    overflow: hidden; text-overflow: ellipsis; max-height: 50px; user-select: text;
    + .cke,
    &.is-edit { font-size: 14px; padding: 20px; background: #fff; box-sizing: border-box; max-height: 150px; height: 150px; width: 380px; outline: none; z-index: 1; position: absolute; left: 0; top: 0; border: solid 1px #028dd8; }
    + .cke:after,
    &:after { content: attr(data-charactersLeft); position: absolute; right: 10px; bottom: 10px; font-size: 12px; }
    + .cke[data-charactersLeft='0']:after,
    &[data-charactersLeft='0']:after { color: #dc6263; }
    + .cke {
      width: 707px; padding: 0; border: 1px solid #b6b6b6; height: auto; max-height: 5000px;
      &:after { bottom: 4px; }
      .cke_top.cke_reset_all { padding-right: 2px; }
    }
  }
  &-header-title {
    position: relative; display: inline-block; vertical-align: middle;
    &.is-filter {
      cursor: pointer; padding-right: 20px;
      &:after { @include angle-down-icon(#1f2532); content: ''; position: absolute; right: 0; width: 13px; height: 13px; }
    }
  }
  &-sorter {
    @include sort-amount-desc-icon(#1f2532); background-color: #f8f8f8; background-size: 13px; display: inline-block; vertical-align: middle; margin-left: 19px; width: 35px; height: 30px; border-radius: 3px; border: solid 1px #e0e0e0; cursor: pointer;
    &:hover { background-color: #ffffff; }
    &.is-sorted { @include sort-amount-desc-icon(#028dd8); background-size: 13px; border-color: #028dd8; }
  }
}

.loader {
  position: relative; overflow: hidden;
  &:before { z-index: 2; @include spin-loader-icon(); width: 100%; height: 100%; content: ''; background-position: 50%; background-size: 100px; position: absolute; top: 0; left: 0; }
  &:after { background: #fff; position: absolute; content: ''; width: 100%; height: 100%; left: 0; top: 0;}
}
